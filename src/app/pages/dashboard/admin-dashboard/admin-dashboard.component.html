<h2>Bienvenue Admin ðŸ‘‘</h2>

<!-- ðŸ”¹ Bouton pour ouvrir la pop-up dâ€™ajout -->
<button (click)="showCreateModal = true" class="btn btn-success">âž• Ajouter un article</button>

<!-- ðŸŸ¢ POPUP CREATION ARTICLE -->
<div class="modal" *ngIf="showCreateModal">
  <div class="modal-content">
    <h3>CrÃ©er un nouvel article</h3>
    <form (ngSubmit)="addArticle()" #formRef="ngForm">
      <input type="text" name="title" [(ngModel)]="newArticle.title" placeholder="Titre" required />
      <br />
      <textarea name="content" [(ngModel)]="newArticle.content" placeholder="Contenu" required></textarea>
      <br />
      <input type="text" name="image" [(ngModel)]="newArticle.image" placeholder="URL de lâ€™image" />
      <br />
      <input type="text" name="tags" [(ngModel)]="newArticle.tags" placeholder="Tags (sÃ©parÃ©s par des virgules)" />
      <br />
      <button type="submit" [disabled]="formRef.invalid" class="btn btn-primary">CrÃ©er</button>
      <button type="button" (click)="showCreateModal = false" class="btn btn-secondary">Annuler</button>
    </form>
  </div>
</div>

<!-- ðŸŸ¡ POPUP MODIFICATION ARTICLE -->
<div class="modal" *ngIf="showEditModal">
  <div class="modal-content">
    <h3>Modifier lâ€™article</h3>
    <form (ngSubmit)="updateArticle()" #editFormRef="ngForm">
      <input type="text" name="title" [(ngModel)]="editForm.title" placeholder="Titre" required />
      <br />
      <textarea name="content" [(ngModel)]="editForm.content" placeholder="Contenu" required></textarea>
      <br />
      <input type="text" name="image" [(ngModel)]="editForm.image" placeholder="URL de lâ€™image" />
      <br />
      <input type="text" name="tags" [(ngModel)]="editForm.tags" placeholder="Tags (sÃ©parÃ©s par des virgules)" />
      <br />
      <button type="submit" [disabled]="editFormRef.invalid" class="btn btn-primary">Enregistrer</button>
      <button type="button" (click)="showEditModal = false" class="btn btn-secondary">Annuler</button>
    </form>
  </div>
</div>

<!-- ðŸ”´ POPUP DE SUPPRESSION ARTICLE -->
<div class="modal" *ngIf="showDeleteModal">
  <div class="modal-content">
    <h3>Confirmation de suppression</h3>
    <p>Es-tu sÃ»r de vouloir supprimer lâ€™article : <strong>{{ selectedArticle?.title }}</strong> ?</p>
    <button (click)="deleteArticle()" class="btn btn-danger">Oui, Supprimer</button>
    <button (click)="showDeleteModal = false" class="btn btn-secondary">Annuler</button>
  </div>
</div>

<hr />

<!-- ðŸ”½ Liste des articles -->
<h3>Liste des articles</h3>

<div *ngIf="loading">Chargement...</div>
<div *ngIf="!loading && articles.length === 0">Aucun article trouvÃ©.</div>

<div *ngIf="!loading && articles.length > 0">
  <div *ngFor="let article of articles" class="article-card">
    <h4>{{ article.title }}</h4>
    <img [src]="article.image" alt="image" width="150" />
    <p>{{ article.content }}</p>
    <p><strong>Auteur :</strong> {{ article.authorDetails?.username || 'Anonyme' }}</p>
    <p><strong>Tags :</strong> {{ article.tags.join(', ') }}</p>

    <button class="btn btn-primary" (click)="openEditModal(article)">Modifier</button>
    <button class="btn btn-danger" (click)="openDeleteModal(article)">Supprimer</button>
    <hr />
  </div>
</div>
